<html>
<head>
<style>
* { padding: 0; margin: 0; }
#graph { top: 0; bottom: 0; left: 0; right: 0; position: absolute; }
</style>
</head>
<body>
<div id="graph"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
<script src="http://cpettitt.github.io/project/graphlib-dot/v0.4.10/graphlib-dot.min.js"></script>
<script src="http://cdn.bootcss.com/sigma.js/1.1.0/sigma.min.js"></script>
<script>
const GEOCODE = {"G01":{"lat":35.6595003,"lng":139.6995542},"G02":{"lat":35.6652511,"lng":139.7120921},"G03":{"lat":35.670399,"lng":139.7178259},"G04":{"lat":35.6728489,"lng":139.7237128},"G05":{"lat":35.676795,"lng":139.737269},"G06":{"lat":35.6738296,"lng":139.7417409},"G07":{"lat":35.670129,"lng":139.750073},"G08":{"lat":35.6661322,"lng":139.7584123},"G09":{"lat":35.6714054,"lng":139.7653555},"G10":{"lat":35.6766788,"lng":139.7700444},"G11":{"lat":35.681878,"lng":139.773376},"G12":{"lat":35.687156,"lng":139.773571},"G13":{"lat":35.6921413,"lng":139.7712247},"G14":{"lat":35.702543,"lng":139.771709},"G15":{"lat":35.7079034,"lng":139.7730918},"G16":{"lat":35.711208,"lng":139.773542},"G17":{"lat":35.711375,"lng":139.782208},"G18":{"lat":35.710042,"lng":139.790291},"G19":{"lat":35.7090465,"lng":139.7966183},"H01":{"lat":35.6442877,"lng":139.6990956},"H02":{"lat":35.6471564,"lng":139.7097394},"H03":{"lat":35.651519,"lng":139.72216},"H04":{"lat":35.6641866,"lng":139.7312425},"H05":{"lat":35.66263,"lng":139.744741},"H06":{"lat":35.6741322,"lng":139.7513926},"H07":{"lat":35.673962,"lng":139.758795},"H08":{"lat":35.6714054,"lng":139.7653555},"H09":{"lat":35.6699813,"lng":139.7674215},"H10":{"lat":35.66788,"lng":139.772516},"H11":{"lat":35.67459729999999,"lng":139.7778069},"H12":{"lat":35.679046,"lng":139.779626},"H13":{"lat":35.686239,"lng":139.782348},"H14":{"lat":35.690405,"lng":139.778792},"H15":{"lat":35.698353,"lng":139.7731143},"H16":{"lat":35.706653,"lng":139.776181},"H18":{"lat":35.720541,"lng":139.784457},"H19":{"lat":35.729374,"lng":139.791234},"H20":{"lat":35.734151,"lng":139.799622},"H21":{"lat":35.749412,"lng":139.805108},"H17":{"lat":35.711208,"lng":139.773542},"MG01":{"lat":35.633998,"lng":139.715828},"MG02":{"lat":35.6256515,"lng":139.7135347},"MG03":{"lat":35.62027339999999,"lng":139.7042314},"MG04":{"lat":35.6156854,"lng":139.6988673},"MG05":{"lat":35.6104125,"lng":139.6943984},"MG06":{"lat":35.60719,"lng":139.684859},"MG07":{"lat":35.6039879,"lng":139.6722637},"MG08":{"lat":35.5968481,"lng":139.6673415},"MG09":{"lat":35.589497,"lng":139.668778},"MM04":{"lat":35.4505292,"lng":139.6359706},"MM05":{"lat":35.446873,"lng":139.642619},"OM01":{"lat":35.6062184,"lng":139.7349306},"OM02":{"lat":35.6088034,"lng":139.7262652},"OM03":{"lat":35.608913,"lng":139.718384},"OM04":{"lat":35.605163,"lng":139.713579},"OM05":{"lat":35.60377709999999,"lng":139.707832},"OM06":{"lat":35.6048782,"lng":139.702656},"OM07":{"lat":35.6063232,"lng":139.6932166},"OM09":{"lat":35.6065052,"lng":139.6791471},"OM10":{"lat":35.607273,"lng":139.668666},"OM11":{"lat":35.605356,"lng":139.661},"OM12":{"lat":35.606967,"lng":139.65389},"OM13":{"lat":35.608355,"lng":139.647946},"OM14":{"lat":35.6119939,"lng":139.6388444},"OM15":{"lat":35.6117047,"lng":139.6266696},"TY01":{"lat":35.6595003,"lng":139.6995542},"TY02":{"lat":35.6480919,"lng":139.703148},"TY03":{"lat":35.6442877,"lng":139.6990956},"YT04":{"lat":35.633998,"lng":139.715828},"TY04":{"lat":35.637159,"lng":139.690746},"TY05":{"lat":35.628743,"lng":139.685247},"TY06":{"lat":35.6179082,"lng":139.6765348},"OM08":{"lat":35.60719,"lng":139.684859},"YT01":{"lat":35.6284713,"lng":139.7387597},"YT02":{"lat":35.620023,"lng":139.728188},"YT03":{"lat":35.6261781,"lng":139.7236062},"YT05":{"lat":35.6471564,"lng":139.7097394},"TY08":{"lat":35.5968481,"lng":139.6673415},"YT08":{"lat":35.684043,"lng":139.702188},"YT07":{"lat":35.6703994,"lng":139.7027149},"YT09":{"lat":35.690553,"lng":139.6995788},"YT10":{"lat":35.7013054,"lng":139.6978596},"YT11":{"lat":35.7134467,"lng":139.7041376},"YT12":{"lat":35.7212199,"lng":139.7066115},"YT13":{"lat":35.72888,"lng":139.7103475},"YT14":{"lat":35.7317847,"lng":139.7282266},"TY09":{"lat":35.589497,"lng":139.668778},"YT15":{"lat":35.733705,"lng":139.740349},"YT16":{"lat":35.7365665,"lng":139.7470098},"YT17":{"lat":35.7383654,"lng":139.7607443},"YT18":{"lat":35.73200569999999,"lng":139.7668856},"YT19":{"lat":35.7283115,"lng":139.7705175},"YT20":{"lat":35.7203576,"lng":139.7790363},"YT21":{"lat":35.711208,"lng":139.773542},"YT22":{"lat":35.7074975,"lng":139.7748046},"YT23":{"lat":35.698353,"lng":139.7731143},"YT24":{"lat":35.6921413,"lng":139.7712247},"YT25":{"lat":35.681298,"lng":139.7662469},"YT26":{"lat":35.6749424,"lng":139.7628943},"YT27":{"lat":35.6661322,"lng":139.7584123},"YT28":{"lat":35.655381,"lng":139.757129},"YT29":{"lat":35.64579760000001,"lng":139.7476565},"TY07":{"lat":35.607273,"lng":139.668666},"YT06":{"lat":35.6595003,"lng":139.6995542},"MG10":{"lat":35.5805941,"lng":139.6619306},"MG11":{"lat":35.5758809,"lng":139.659688},"MG12":{"lat":35.5643213,"lng":139.6540395},"MG13":{"lat":35.5532868,"lng":139.6468632},"MM01":{"lat":35.4650968,"lng":139.6202978},"MM02":{"lat":35.462038,"lng":139.626731},"MM03":{"lat":35.45792,"lng":139.6322772},"MM06":{"lat":35.4427936,"lng":139.6503166},"OMB1":{"lat":35.60695750000001,"lng":139.6224949},"OMB2":{"lat":35.6032697,"lng":139.6170635},"OM16":{"lat":35.5998876,"lng":139.6105258},"TY14":{"lat":35.5366941,"lng":139.6346323},"TY15":{"lat":35.522392,"lng":139.629812},"TY16":{"lat":35.51014079999999,"lng":139.6313589},"TY17":{"lat":35.498784,"lng":139.633285},"TY18":{"lat":35.4895411,"lng":139.6278444},"TY19":{"lat":35.483369,"lng":139.629536},"TY20":{"lat":35.4743599,"lng":139.6253063},"TY10":{"lat":35.5805941,"lng":139.6619306},"TY11":{"lat":35.5758809,"lng":139.659688},"TY12":{"lat":35.5643213,"lng":139.6540395},"TY13":{"lat":35.5532868,"lng":139.6468632},"TY21":{"lat":35.4650968,"lng":139.6202978}};
const LATLNG_MULT = 1e8;
</script>
<script>
const GRAPH_FILE = 'https://raw.githubusercontent.com/wesalvaro/tokyo-dot/master/tokyo.dot';
d3.text(GRAPH_FILE, function(e, dot) {
  if (e) throw e;
  const graph = graphlibDot.parse(dot);

  const nodes = [];
  const edges = [];

  graph.eachNode(function(id, node) {
    node.id = id;
    node.size = 1;
    const splits = node.label.split('|')[0].split('{{');
    node.label = splits[splits.length - 1];
    const geocode = GEOCODE[id];
    if (!geocode) {
      console.log('geocode not found', id);
      return;
    }
    node.y = Math.floor(-geocode.lat * LATLNG_MULT);
    node.x = Math.floor(geocode.lng * LATLNG_MULT);
    console.log(id, node.x, node.y);
    nodes.push(node);
  });

  graph.eachEdge(function(id, source, target, edge) {
    edge.id = id;
    edge.size = 1;
    edge.color = edge.color;
    edge.source = source;
    edge.target = target;
    edges.push(edge);
  });

  // Instantiate sigma:
  s = new sigma({
    graph: {nodes: nodes, edges: edges},
    container: 'graph'
  });
});
</script>
</body></html>
